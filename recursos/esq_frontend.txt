#################################################################################
#                                                                               #
#        DOCUMENTO DE DESIGN CONCEITUAL DO FRONTEND (UI/UX)                     #
#                     (Interface Exclusiva do Administrador)                    #
#                                                                               #
#        Sistema: Gestão de Projetos e Melhorias                                #
#        Baseado em: BD v1.2 e Arquitetura Backend Revisada                     #
#        Data da Documentação: 07 de Maio de 2025                               #
#                                                                               #
#################################################################################

**VISÃO GERAL:**
* A interface será uma aplicação web acessada apenas por usuários com perfil 'admin'.
* O design buscará ser "clean e funcional", priorizando clareza, consistência e eficiência para as tarefas administrativas.

---

**1. LAYOUT GERAL E NAVEGAÇÃO PRINCIPAL:**

* **Estrutura:** Layout padrão de aplicação web administrativa.
    * **Menu Lateral Fixo (Esquerda):** Principal meio de navegação, contendo links para todas as seções principais. Poderá ser recolhível. Uso de ícones e texto.
    * **Área de Conteúdo Principal (Direita):** Onde as telas selecionadas no menu são carregadas.
    * **Cabeçalho Superior (Opcional):** Pode conter logo, nome do Admin logado, botão de Logout.
* **Estrutura Sugerida do Menu Lateral:**
    * Dashboard (Início)
    * Planejamento
        * Planejar Horas por Recurso
        * Gerenciar Alocações
        * Capacidade RH
    * Apontamentos
        * Consultar/Gerenciar Apontamentos
        * Criar Apontamento Manual
    * Gerenciamento (Cadastros Base)
        * Projetos / Melhorias
        * Recursos
        * Equipes
        * Seções
        * Status de Projetos
    * Administração
        * Usuários do Sistema
        * Configurações Gerais
        * Integração Jira (Status/Logs)
        * Logs de Atividade
    * Relatórios (Opcional, se houver relatórios internos)

---

**2. PAINEL PRINCIPAL (DASHBOARD) DO ADMINISTRADOR:**

* **Propósito:** Visão geral rápida e acesso a tarefas comuns ao entrar no sistema.
* **Componentes:** Organizados em cards/seções.
    * **Status da Integração Jira:** Indicador visual (Verde/Amarelo/Vermelho), data/hora da última sincronização, mensagem de erro/aviso (se houver), link para tela de logs detalhados.
    * **Alertas de Capacidade:** (Visível se a configuração de alerta estiver ativa). Lista recursos que excederam `horas_disponiveis_rh` com suas `horas_apontadas` no mês atual/anterior. Exibe Nome, Horas Apontadas, Horas Disponíveis, Excesso (destacado). Link para consulta de apontamentos do recurso.
    * **Atalhos Rápidos:** Botões/links proeminentes para: "Criar Apontamento Manual", "Planejar Horas", "Gerenciar Recursos", "Gerenciar Projetos", "Consultar Apontamentos".
    * **Projetos/Melhorias Recentes:** Lista dos últimos projetos modificados (Nome, Status, Data Modificação), com link para a tela de gerenciamento do projeto.

---

**3. TELAS DE GERENCIAMENTO (CRUD PADRÃO):**

* **Padrão Geral:** Aplicado a Seções, Equipes, Recursos, Status de Projetos, Projetos/Melhorias, Alocações, Horas Disponíveis RH, Usuários.
    * **Acesso:** Via item correspondente no menu lateral.
    * **Tela Principal:**
        * Título claro.
        * Botão "+ Adicionar Novo..."
        * Área de Filtros/Pesquisa (campos relevantes para a entidade).
        * Tabela de Resultados (colunas relevantes, paginação).
        * Coluna de "Ações" na tabela com botões/ícones para:
            * "Editar": Abre o formulário de edição.
            * "Ativar/Desativar": Altera o status `ativo` (preferível a excluir para entidades com histórico). Para Alocações, a ação seria "Excluir" (com aviso sobre cascata no planejamento).
            * (Opcional) Ações contextuais (ex: "Planejar Horas" na linha de Alocação).
    * **Formulário de Criação/Edição:** (Modal ou página separada)
        * Título claro ("Novo..." ou "Editar...").
        * Campos correspondentes às colunas da tabela no BD, com validações apropriadas (obrigatório, tipo, unicidade).
        * Uso de controles adequados (texto, número, data, dropdown, checkbox/switch).
        * Botões "Salvar" e "Cancelar".
        * Tratamento especial para senhas (apenas na criação, não exibir na edição).
        * Tratamento especial para campos sensíveis ou não editáveis via UI (ex: Chaves de Configuração).

---

**4. TELA DE "PLANEJAR HORAS POR RECURSO":**

* **Propósito:** Interface principal para o Admin distribuir as horas planejadas mensais de um recurso entre seus projetos alocados.
* **Seleção:** Admin seleciona 1 Recurso e 1 Período (Mês/Ano inicial e final).
* **Sumário:** Exibe capacidade total disponível (RH), total planejado e GAP geral para o recurso/período.
* **Grade de Planejamento:**
    * Linhas: Projetos alocados ao recurso no período.
    * Colunas: Meses do período selecionado + Total por Projeto.
    * Linhas de Cabeçalho/Resumo Fixas: Nomes dos Meses, Horas Disponíveis (RH) por mês, Total Planejado por mês (calculado), GAP por mês (Disponível - Planejado, com alerta visual se negativo e se alerta ativo).
    * Células [Projeto, Mês]: Campos numéricos **editáveis** para o Admin inserir/alterar `horas_planejadas`.
* **Interatividade:** Edição nas células recalcula *dinamicamente* os totais e GAPs mensais e gerais na tela.
* **Ações:** Botão "Salvar Planejamento" para persistir as alterações.

---

**5. TELA DE "CONSULTAR/GERENCIAR APONTAMENTOS":**

* **Propósito:** Visualizar TODOS os apontamentos (Jira e Manuais), aplicar filtros avançados para relatórios na tela, e gerenciar APENAS os apontamentos manuais.
* **Filtros Avançados:** Painel com filtros combináveis por Período, Recurso(s), Projeto(s), Equipe(s), Seção(ões), Fonte, Issue Key.
* **Sumário da Consulta:** Exibe totais calculados sobre os dados filtrados (Total Horas Apontadas). Se filtro por recurso/mês específico, compara com Horas Disponíveis RH e mostra Saldo (com alerta visual se negativo e se alerta ativo).
* **Tabela de Resultados:** Lista apontamentos filtrados.
    * Colunas: Data, Recurso, Projeto, Horas, **Fonte** (com indicador visual claro JIRA vs MANUAL), Issue Key, Descrição, Admin Criador (se manual), etc.
    * Paginação.
* **Ações por Linha:**
    * **Editar/Excluir:** Botões **ATIVOS SOMENTE** para linhas com `fonte_apontamento` = 'MANUAL'. Para linhas 'JIRA', estarão desativados/ocultos.
* **Botão de Exportação:** Exporta os resultados filtrados.
* **Botão de Ação Principal:** "+ Criar Apontamento Manual".

---

**6. TELAS DA SEÇÃO "ADMINISTRAÇÃO":**

* **Gerenciamento de Usuários:** CRUD padrão para a tabela `usuario` (com atenção à gestão de senhas).
* **Configurações Gerais:** Interface para visualizar e **editar VALORES** de configurações predefinidas na tabela `configuracao`. Chaves não são editáveis/criáveis/excluíveis via UI padrão. Valores sensíveis (API Keys) são mascarados e não editáveis. Inclui o controle para ativar/desativar alertas de capacidade.
* **Integração Jira:** Tela informativa mostrando status da última sincronização e uma tabela/log com o histórico das sincronizações (dados da `sincronizacao_jira`). Opcional: botão para disparo manual de sync.
* **Logs de Atividade:** Visualizador da tabela `log_atividade` com filtros avançados (usuário, período, ação, tabela, etc.) para auditoria. Dados são somente leitura.

---

Este resumo consolida o design conceitual da interface do Administrador que construímos juntos. Ele serve como um guia para o desenvolvimento visual e funcional do frontend.