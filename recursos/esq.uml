@startuml

class Secao {
  -id: int
  -nome: string
  -descricao: text
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -ativo: boolean
}

class Equipe {
  -id: int
  -secaoId: int
  -nome: string
  -descricao: text
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -ativo: boolean
}

class Recurso {
  -id: int
  -equipeId: int
  -nome: string
  -email: string
  -cargo: string
  -jiraId: string
  -horasAnuais: int
  -dataAdmissao: date
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -ativo: boolean
}

class Projeto {
  -id: int
  -nome: string
  -descricao: text
  -dataInicio: date
  -dataFim: date
  -codigoJira: string
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -ativo: boolean
}

class RecursoProjeto {
  -id: int
  -recursoId: int
  -projetoId: int
  -dataAtribuicao: datetime
  -dataAtualizacao: datetime
}

class PlanejamentoAnual {
  -id: int
  -recursoId: int
  -projetoId: int
  -ano: int
  -totalHoras: int
  -status: enum
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -administradorId: int
}

class PlanejamentoMensal {
  -id: int
  -planejamentoAnualId: int
  -mes: int
  -horasPlanejadas: int
  -dataCriacao: datetime
  -dataAtualizacao: datetime
}

class Apontamento {
  -id: int
  -recursoId: int
  -projetoId: int
  -dataApontamento: date
  -horasApontadas: decimal
  -descricao: text
  -codigoTarefaJira: string
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -dataSincronizacao: datetime
}

class Usuario {
  -id: int
  -nome: string
  -email: string
  -senha: string
  -role: enum
  -recursoId: int
  -dataCriacao: datetime
  -dataAtualizacao: datetime
  -ultimoAcesso: datetime
  -ativo: boolean
}

class RecursoDisponibilidade {
  -id: int
  -recursoId: int
  -dataInicio: date
  -dataFim: date
  -horasDisponiveis: decimal
  -motivo: string
  -dataCriacao: datetime
  -dataAtualizacao: datetime
}

class SincronizacaoJira {
  -id: int
  -dataInicio: datetime
  -dataFim: datetime
  -status: string
  -mensagem: text
  -quantidadeApontamentos: int
  -usuarioId: int
}

class Configuracao {
  -id: int
  -chave: string
  -valor: text
  -descricao: text
  -dataCriacao: datetime
  -dataAtualizacao: datetime
}

class LogAtividade {
  -id: int
  -usuarioId: int
  -acao: string
  -tabelaAfetada: string
  -registroId: int
  -dadosAnteriores: text
  -dadosNovos: text
  -ipOrigem: string
  -dataHora: datetime
}

class DimTempo {
  -dataId: int
  -data: date
  -dia: int
  -diaSemana: int
  -diaSemanaNome: string
  -semana: int
  -mes: int
  -mesNome: string
  -trimestre: int
  -ano: int
  -diaUtil: boolean
  -feriado: boolean
  -nomeFeriado: string
}

' Relacionamentos
Secao "1" -- "0..*" Equipe: contÃ©m >
Equipe "1" -- "0..*" Recurso: contÃ©m >
Recurso "0..*" -- "0..*" Projeto: trabalha em >
RecursoProjeto "*" --> "1" Recurso: referencia
RecursoProjeto "*" --> "1" Projeto: referencia
Recurso "1" -- "0..*" PlanejamentoAnual: tem >
Projeto "1" -- "0..*" PlanejamentoAnual: possui >
PlanejamentoAnual "1" -- "0..*" PlanejamentoMensal: detalhado em >
Usuario "1" -- "0..*" PlanejamentoAnual: cria >
Recurso "1" -- "0..*" Apontamento: registra >
Projeto "1" -- "0..*" Apontamento: recebe >
Usuario "1" -- "0..1" Recurso: representa >
Recurso "1" -- "0..*" RecursoDisponibilidade: define >
Usuario "1" -- "0..*" LogAtividade: gera >
Usuario "1" -- "0..*" SincronizacaoJira: executa >
DimTempo "1" -- "0..*" Apontamento: referencia >

@enduml